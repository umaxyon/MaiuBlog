var v=Object.defineProperty;var m=(a,e,s)=>e in a?v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var t=(a,e,s)=>(m(a,typeof e!="symbol"?e+"":e,s),s);import{P as o,j as f,r as y,R as b,a as j}from"./vendor.f1cc6c9a.js";const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}};S();const g=16,x=["!",'"',"#","$","%","&","'","(",")","=","~","|","`","{","+","*","}","<",">","?","_"],E=["0","1","2","3","4","5","6","7","8","9","-","^","\\","@","[",";",":","]",", ",".","/"],A={"49":[33,49],"50":[34,50],"51":[35,51],"52":[36,52],"53":[37,53],"54":[38,54],"55":[39,55],"56":[40,56],"57":[41,57],"186":[42,58],"187":[43,59],"188":[60,44],"189":[61,45],"190":[62,46],"191":[63,47],"192":[96,64],"219":[123,91],"220":[124,92],"221":[125,93],"222":[126,94],"226":[95,92]};class _{constructor(e){t(this,"shiftPress",!1);t(this,"listners",[]);this.scene=e}addListner(e){this.listners.push(e)}attachEvent(){return this.scene.input.keyboard.on("keydown",e=>{e.keyCode===g&&(this.shiftPress=!0),this.listners.forEach(s=>{e.keyCode!==g&&s(e.keyCode,this.shiftPress)})}),this.scene.input.keyboard.on("keyup",e=>{e.keyCode===g&&(this.shiftPress=!1)}),this}downKeyCodeToAscii(e,s){let c=e;const i=A[e];return i&&(c=s?i[0]:i[1]),c}getRundomKey(){const e=o.Math.RND.pick([1,2])==1?x:E;return e[o.Math.RND.integerInRange(0,e.length-1)]}getRundomKeyCode(){return String(this.getRundomKey().charCodeAt(0))}}class w extends o.GameObjects.Image{constructor(e){super(e,0,0,"bullet");t(this,"speed");t(this,"born");t(this,"direction");t(this,"xSpeed");t(this,"ySpeed");t(this,"emitter");this.speed=5,this.born=0,this.direction=0,this.xSpeed=0,this.ySpeed=0}fire(e,s){this.setPosition(e.x,e.y),this.direction=Math.atan((s.x-this.x)/(s.y-this.y)),s.y>=this.y?(this.xSpeed=this.speed*Math.sin(this.direction),this.ySpeed=this.speed*Math.cos(this.direction)):(this.xSpeed=-this.speed*Math.sin(this.direction),this.ySpeed=-this.speed*Math.cos(this.direction)),this.rotation=e.rotation,this.born=0,this.emitter=this.createEmitter(),this.emitter.setPosition(e.x,e.y).startFollow(this)}hitCallback(e){e.active===!0&&this.active===!0&&(e.setActive(!1).setVisible(!1),this.setActive(!1).setVisible(!1))}createEmitter(){return this.scene.add.particles("red").createEmitter({speed:20,scale:{start:.5,end:0},blendMode:"ADD"})}update(e,s){this.x+=this.xSpeed*s,this.y+=this.ySpeed*s,this.born+=s,this.born>1800&&(this.setActive(!1),this.setVisible(!1))}deactive(){var e;this.setActive(!1).setVisible(!1),(e=this.emitter)==null||e.setVisible(!1)}}class M extends o.Scene{constructor(){super({key:"mainscene"});t(this,"keyPrc");t(this,"imgs");t(this,"walls");t(this,"ballets");t(this,"chrs");t(this,"senkan");t(this,"line");t(this,"st");t(this,"labelScore");this.keyPrc=new _(this)}initStatus(){return{score:0,speed:20,maxEnemy:1,gameOver:!1}}init(e){this.st=this.initStatus(),this.imgs=e.imgs,this.st.speed=e.speed}preload(){this.imgs.loadMain(this),this.walls=this.physics.add.staticGroup(),this.chrs=this.physics.add.group(),this.ballets=this.physics.add.group({classType:w,runChildUpdate:!0}),this.keyPrc.attachEvent().addListner((e,s)=>{var c;(c=this.chrs)==null||c.children.iterate(i=>{var r;if(this.isTarget(i,e,s)){const n=(r=this.ballets)==null?void 0:r.get().setActive(!0).setVisible(!0);n&&(n.fire(this.senkan,i),this.physics.add.overlap(i,n,(u,k)=>{u.active===!0&&k.active===!0&&(u.destroy(),this.st.score+=10,this.st.maxEnemy=Math.floor(this.st.score/100)+1,this.labelScore.setText(`Score: ${this.st.score}`))}))}})})}create(){this.add.image(400,300,"sky"),this.line=this.physics.add.image(400,600,"line"),this.senkan=this.physics.add.sprite(400,550,"senkan").setScale(.7),this.add.image(730,585,"tag"),this.walls.create(-15,300,"wall"),this.walls.create(815,300,"wall"),this.labelScore=this.add.text(16,560,"Score: 0",{fontSize:"15px",color:"#022",fontStyle:"bold",fontFamily:"\u30E1\u30A4\u30EA\u30AA"}),this.physics.add.collider(this.chrs,this.walls),this.physics.add.overlap(this.chrs,this.line,()=>{this.gameover()}),this.anims.create({key:"senkan_death",frames:this.anims.generateFrameNumbers("senkan",{start:0,end:6}),frameRate:15})}gameover(){var e;(e=this.senkan)==null||e.anims.play("senkan_death"),this.st.gameOver=!0,this.time.delayedCall(1e3,()=>{const s={fontSize:"30px",fontStyle:"bold",color:"#547EFF",fontFamily:"\u30E1\u30A4\u30EA\u30AA"};this.add.image(400,300,"gameover"),this.add.text(385,285,String(this.st.score),s).setOrigin(0),this.add.text(385,324,this.st.speed===100?"Hard":"Easy",s).setOrigin(0),this.add.image(280,410,"btn_retry").setInteractive().once("pointerup",()=>{this.scene.restart()}),this.add.image(520,410,"btn_title").setInteractive().once("pointerup",()=>{this.scene.start("titlescene")})}),this.physics.pause()}createEnemy(){const e=this.keyPrc.getRundomKeyCode(),s=this.chrs.create(o.Math.Between(30,770),-13,e).setScale(.3);s.setName(e),s.setBounce(1),s.setCollideWorldBounds(!1,1,0),s.setVelocity(o.Math.Between(-80,80),this.st.speed),s.allowGravity=!1,s.setVisible(!0).setActive(!0)}isTarget(e,s,c){return parseInt(e.name)===this.keyPrc.downKeyCodeToAscii(s,c)}update(){if(!this.st.gameOver)for(;this.chrs.countActive(!0)<this.st.maxEnemy;)this.createEnemy()}}class T extends o.Scene{constructor(){super({key:"titlescene"});t(this,"imgs")}init(e){this.imgs=e.imgs}preload(){this.imgs.loadTitle(this)}create(e){this.add.image(400,300,"sky"),this.add.image(400,600,"line"),this.add.image(400,300,"title"),this.add.image(730,585,"tag"),this.add.image(280,500,"btn_easy").setInteractive().once("pointerup",()=>{e.speed=20,this.scene.start("mainscene",e)}),this.add.image(530,500,"btn_hard").setInteractive().once("pointerup",()=>{e.speed=100,this.scene.start("mainscene",e)})}}var d="/services/kigoujigoku/assets/sky.3e1050c2.png",P="/services/kigoujigoku/assets/wall.3733432b.png",l="/services/kigoujigoku/assets/line.ce4bcb04.png",O="/services/kigoujigoku/assets/red.f98819fc.png",I="/services/kigoujigoku/assets/star.df34f207.png",R="/services/kigoujigoku/assets/senkan_sp.584e9881.png",C="/services/kigoujigoku/assets/title.a2b7c00a.png",B="/services/kigoujigoku/assets/start_easy.4c1223b6.png",K="/services/kigoujigoku/assets/start_hard.67307db0.png",F="/services/kigoujigoku/assets/gameover.510ac0f6.png",N="/services/kigoujigoku/assets/btn_title.538c3f75.png",H="/services/kigoujigoku/assets/btn_retry.bd7c5498.png",p="/services/kigoujigoku/assets/tag.7bf9a38f.png",L="/services/kigoujigoku/assets/33.219050dd.png",V="/services/kigoujigoku/assets/34.9f471eb5.png",D="/services/kigoujigoku/assets/35.7fc799a6.png",G="/services/kigoujigoku/assets/36.2d0c400d.png",W="/services/kigoujigoku/assets/37.0517cea3.png",Y="/services/kigoujigoku/assets/38.07307ff6.png",$="/services/kigoujigoku/assets/39.15c539b5.png",z="/services/kigoujigoku/assets/40.07fa8e7f.png",U="/services/kigoujigoku/assets/41.7b4778b7.png",q="/services/kigoujigoku/assets/42.7a066fa2.png",J="/services/kigoujigoku/assets/43.38f8e9b4.png",Q="/services/kigoujigoku/assets/44.4fb6dab2.png",X="/services/kigoujigoku/assets/45.a14eb214.png",Z="/services/kigoujigoku/assets/46.5354b9fb.png",ee="/services/kigoujigoku/assets/47.35d11d55.png",se="/services/kigoujigoku/assets/48.a680c6b0.png",ie="/services/kigoujigoku/assets/49.aefd1372.png",te="/services/kigoujigoku/assets/50.b8a26b8a.png",re="/services/kigoujigoku/assets/51.8c216c61.png",ae="/services/kigoujigoku/assets/52.7d508b28.png",ce="/services/kigoujigoku/assets/53.ca2495ca.png",oe="/services/kigoujigoku/assets/54.1498ee61.png",ne="/services/kigoujigoku/assets/55.fcd0b6eb.png",ge="/services/kigoujigoku/assets/56.7ccdf542.png",he="/services/kigoujigoku/assets/57.b24bb720.png",ue="/services/kigoujigoku/assets/58.54968a41.png",de="/services/kigoujigoku/assets/59.df30c326.png",le="/services/kigoujigoku/assets/60.267bf0b0.png",pe="/services/kigoujigoku/assets/61.fbfbfdb1.png",ke="/services/kigoujigoku/assets/62.40273c74.png",ve="/services/kigoujigoku/assets/63.9b29fab2.png",me="/services/kigoujigoku/assets/64.d7ea1d5d.png",fe="/services/kigoujigoku/assets/91.f75b4c20.png",ye="/services/kigoujigoku/assets/92.4c06fb12.png",be="/services/kigoujigoku/assets/93.0357ea2a.png",je="/services/kigoujigoku/assets/94.48c6d76c.png",Se="/services/kigoujigoku/assets/95.80ac9462.png",xe="/services/kigoujigoku/assets/96.1967ba9a.png",Ee="/services/kigoujigoku/assets/123.265c0093.png",Ae="/services/kigoujigoku/assets/124.79f5e5c6.png",_e="/services/kigoujigoku/assets/125.ba0c81ec.png",we="/services/kigoujigoku/assets/126.e0eb6a9b.png";class Me{constructor(){t(this,"imgs");this.imgs={sky:d,wall:P,red:O,line:l,"33":L,"34":V,"35":D,"36":G,"37":W,"38":Y,"39":$,"40":z,"41":U,"42":q,"43":J,"44":Q,"45":X,"46":Z,"47":ee,"48":se,"49":ie,"50":te,"51":re,"52":ae,"53":ce,"54":oe,"55":ne,"56":ge,"57":he,"58":ue,"59":de,"60":le,"61":pe,"62":ke,"63":ve,"64":me,"91":fe,"92":ye,"93":be,"94":je,"95":Se,"96":xe,"123":Ee,"124":Ae,"125":_e,"126":we,bullet:I,gameover:F,btn_title:N,btn_retry:H,tag:p}}loadMain(e){Object.keys(this.imgs).forEach(s=>{e.load.image(s,this.imgs[s])}),e.load.spritesheet("senkan",R,{frameWidth:180,frameHeight:140})}loadTitle(e){e.load.image("sky",d),e.load.image("line",l),e.load.image("title",C),e.load.image("tag",p),e.load.image("btn_easy",B),e.load.image("btn_hard",K)}}const h=f.exports.jsx;function Te(){return y.exports.useEffect(()=>{const a={type:o.AUTO,parent:"phaser-game",width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:[T,M]};new o.Game(a).scene.start("titlescene",{imgs:new Me})},[0]),h("div",{id:"phaser-game"})}b.render(h(j.StrictMode,{children:h(Te,{})}),document.getElementById("kigou_root"));
