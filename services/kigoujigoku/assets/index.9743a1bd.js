var v=Object.defineProperty;var m=(r,e,s)=>e in r?v(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var t=(r,e,s)=>(m(r,typeof e!="symbol"?e+"":e,s),s);import{P as c,j as f,r as y,R as b,a as M}from"./vendor.f1cc6c9a.js";const B=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}};B();const n=16,j=["!",'"',"#","$","%","&","'","(",")","=","~","|","`","{","+","*","}","<",">","?","_"],S=["0","1","2","3","4","5","6","7","8","9","-","^","\\","@","[",";",":","]",", ",".","/"],x={"49":[33,49],"50":[34,50],"51":[35,51],"52":[36,52],"53":[37,53],"54":[38,54],"55":[39,55],"56":[40,56],"57":[41,57],"186":[42,58],"187":[43,59],"188":[60,44],"189":[61,45],"190":[62,46],"191":[63,47],"192":[96,64],"219":[123,91],"220":[124,92],"221":[125,93],"222":[126,94],"226":[95,92]};class E{constructor(e){t(this,"shiftPress",!1);t(this,"listners",[]);this.scene=e}addListner(e){this.listners.push(e)}attachEvent(){return this.scene.input.keyboard.on("keydown",e=>{e.keyCode===n&&(this.shiftPress=!0),this.listners.forEach(s=>{e.keyCode!==n&&s(e.keyCode,this.shiftPress)})}),this.scene.input.keyboard.on("keyup",e=>{e.keyCode===n&&(this.shiftPress=!1)}),this}downKeyCodeToAscii(e,s){let o=e;const i=x[e];return i&&(o=s?i[0]:i[1]),o}getRundomKey(){const e=c.Math.RND.pick([1,2])==1?j:S;return e[c.Math.RND.integerInRange(0,e.length-1)]}getRundomKeyCode(){return String(this.getRundomKey().charCodeAt(0))}}class A extends c.GameObjects.Image{constructor(e){super(e,0,0,"bullet");t(this,"speed");t(this,"born");t(this,"direction");t(this,"xSpeed");t(this,"ySpeed");t(this,"emitter");this.speed=5,this.born=0,this.direction=0,this.xSpeed=0,this.ySpeed=0}fire(e,s){this.setPosition(e.x,e.y),this.direction=Math.atan((s.x-this.x)/(s.y-this.y)),s.y>=this.y?(this.xSpeed=this.speed*Math.sin(this.direction),this.ySpeed=this.speed*Math.cos(this.direction)):(this.xSpeed=-this.speed*Math.sin(this.direction),this.ySpeed=-this.speed*Math.cos(this.direction)),this.rotation=e.rotation,this.born=0,this.emitter=this.createEmitter(),this.emitter.setPosition(e.x,e.y).startFollow(this)}hitCallback(e){e.active===!0&&this.active===!0&&(e.setActive(!1).setVisible(!1),this.setActive(!1).setVisible(!1))}createEmitter(){return this.scene.add.particles("red").createEmitter({speed:20,scale:{start:.5,end:0},blendMode:"ADD"})}update(e,s){this.x+=this.xSpeed*s,this.y+=this.ySpeed*s,this.born+=s,this.born>1800&&(this.setActive(!1),this.setVisible(!1))}deactive(){var e;this.setActive(!1).setVisible(!1),(e=this.emitter)==null||e.setVisible(!1)}}class _ extends c.Scene{constructor(){super({key:"mainscene"});t(this,"keyPrc");t(this,"imgs");t(this,"walls");t(this,"ballets");t(this,"chrs");t(this,"senkan");t(this,"line");t(this,"st");t(this,"labelScore");this.keyPrc=new E(this)}initStatus(){return{score:0,speed:20,maxEnemy:1,gameOver:!1}}init(e){this.st=this.initStatus(),this.imgs=e.imgs,this.st.speed=e.speed}preload(){this.imgs.loadMain(this),this.walls=this.physics.add.staticGroup(),this.chrs=this.physics.add.group(),this.ballets=this.physics.add.group({classType:A,runChildUpdate:!0}),this.keyPrc.attachEvent().addListner((e,s)=>{var o;(o=this.chrs)==null||o.children.iterate(i=>{var a;if(this.isTarget(i,e,s)){const g=(a=this.ballets)==null?void 0:a.get().setActive(!0).setVisible(!0);g&&(g.fire(this.senkan,i),this.physics.add.overlap(i,g,(l,k)=>{l.active===!0&&k.active===!0&&(l.destroy(),this.st.score+=10,this.st.maxEnemy=Math.floor(this.st.score/100)+1,this.labelScore.setText(`Score: ${this.st.score}`))}))}})})}create(){this.add.image(400,300,"sky"),this.line=this.physics.add.image(400,600,"line"),this.senkan=this.physics.add.sprite(400,550,"senkan").setScale(.7),this.add.image(730,585,"tag"),this.walls.create(-15,300,"wall"),this.walls.create(815,300,"wall"),this.labelScore=this.add.text(16,560,"Score: 0",{fontSize:"15px",color:"#022",fontStyle:"bold",fontFamily:"\u30E1\u30A4\u30EA\u30AA"}),this.physics.add.collider(this.chrs,this.walls),this.physics.add.overlap(this.chrs,this.line,()=>{this.gameover()}),this.anims.create({key:"senkan_death",frames:this.anims.generateFrameNumbers("senkan",{start:0,end:6}),frameRate:15})}gameover(){var e;(e=this.senkan)==null||e.anims.play("senkan_death"),this.st.gameOver=!0,this.time.delayedCall(1e3,()=>{const s={fontSize:"30px",fontStyle:"bold",color:"#547EFF",fontFamily:"\u30E1\u30A4\u30EA\u30AA"};this.add.image(400,300,"gameover"),this.add.text(385,285,String(this.st.score),s).setOrigin(0),this.add.text(385,324,this.st.speed===100?"Hard":"Easy",s).setOrigin(0),this.add.image(280,410,"btn_retry").setInteractive().once("pointerup",()=>{this.scene.restart()}),this.add.image(520,410,"btn_title").setInteractive().once("pointerup",()=>{this.scene.start("titlescene")})}),this.physics.pause()}createEnemy(){const e=this.keyPrc.getRundomKeyCode(),s=this.chrs.create(c.Math.Between(30,770),-13,e).setScale(.3);s.setName(e),s.setBounce(1),s.setCollideWorldBounds(!1,1,0),s.setVelocity(c.Math.Between(-80,80),this.st.speed),s.allowGravity=!1,s.setVisible(!0).setActive(!0)}isTarget(e,s,o){return parseInt(e.name)===this.keyPrc.downKeyCodeToAscii(s,o)}update(){if(!this.st.gameOver)for(;this.chrs.countActive(!0)<this.st.maxEnemy;)this.createEnemy()}}class w extends c.Scene{constructor(){super({key:"titlescene"});t(this,"imgs")}init(e){this.imgs=e.imgs}preload(){this.imgs.loadTitle(this)}create(e){this.add.image(400,300,"sky"),this.add.image(400,600,"line"),this.add.image(400,300,"title"),this.add.image(730,585,"tag"),this.add.image(280,500,"btn_easy").setInteractive().once("pointerup",()=>{e.speed=20,this.scene.start("mainscene",e)}),this.add.image(530,500,"btn_hard").setInteractive().once("pointerup",()=>{e.speed=100,this.scene.start("mainscene",e)})}}var h="/MaiuBlog/services/kigoujigoku/assets/sky.3e1050c2.png",T="/MaiuBlog/services/kigoujigoku/assets/wall.3733432b.png",d="/MaiuBlog/services/kigoujigoku/assets/line.ce4bcb04.png",P="/MaiuBlog/services/kigoujigoku/assets/red.f98819fc.png",O="/MaiuBlog/services/kigoujigoku/assets/star.df34f207.png",I="/MaiuBlog/services/kigoujigoku/assets/senkan_sp.584e9881.png",R="/MaiuBlog/services/kigoujigoku/assets/title.a2b7c00a.png",C="/MaiuBlog/services/kigoujigoku/assets/start_easy.4c1223b6.png",K="/MaiuBlog/services/kigoujigoku/assets/start_hard.67307db0.png",F="/MaiuBlog/services/kigoujigoku/assets/gameover.510ac0f6.png",N="/MaiuBlog/services/kigoujigoku/assets/btn_title.538c3f75.png",H="/MaiuBlog/services/kigoujigoku/assets/btn_retry.bd7c5498.png",p="/MaiuBlog/services/kigoujigoku/assets/tag.7bf9a38f.png",L="/MaiuBlog/services/kigoujigoku/assets/33.219050dd.png",V="/MaiuBlog/services/kigoujigoku/assets/34.9f471eb5.png",D="/MaiuBlog/services/kigoujigoku/assets/35.7fc799a6.png",G="/MaiuBlog/services/kigoujigoku/assets/36.2d0c400d.png",W="/MaiuBlog/services/kigoujigoku/assets/37.0517cea3.png",Y="/MaiuBlog/services/kigoujigoku/assets/38.07307ff6.png",$="/MaiuBlog/services/kigoujigoku/assets/39.15c539b5.png",z="/MaiuBlog/services/kigoujigoku/assets/40.07fa8e7f.png",U="/MaiuBlog/services/kigoujigoku/assets/41.7b4778b7.png",q="/MaiuBlog/services/kigoujigoku/assets/42.7a066fa2.png",J="/MaiuBlog/services/kigoujigoku/assets/43.38f8e9b4.png",Q="/MaiuBlog/services/kigoujigoku/assets/44.4fb6dab2.png",X="/MaiuBlog/services/kigoujigoku/assets/45.a14eb214.png",Z="/MaiuBlog/services/kigoujigoku/assets/46.5354b9fb.png",ee="/MaiuBlog/services/kigoujigoku/assets/47.35d11d55.png",se="/MaiuBlog/services/kigoujigoku/assets/48.a680c6b0.png",ie="/MaiuBlog/services/kigoujigoku/assets/49.aefd1372.png",te="/MaiuBlog/services/kigoujigoku/assets/50.b8a26b8a.png",ae="/MaiuBlog/services/kigoujigoku/assets/51.8c216c61.png",re="/MaiuBlog/services/kigoujigoku/assets/52.7d508b28.png",oe="/MaiuBlog/services/kigoujigoku/assets/53.ca2495ca.png",ce="/MaiuBlog/services/kigoujigoku/assets/54.1498ee61.png",ge="/MaiuBlog/services/kigoujigoku/assets/55.fcd0b6eb.png",ne="/MaiuBlog/services/kigoujigoku/assets/56.7ccdf542.png",ue="/MaiuBlog/services/kigoujigoku/assets/57.b24bb720.png",le="/MaiuBlog/services/kigoujigoku/assets/58.54968a41.png",he="/MaiuBlog/services/kigoujigoku/assets/59.df30c326.png",de="/MaiuBlog/services/kigoujigoku/assets/60.267bf0b0.png",pe="/MaiuBlog/services/kigoujigoku/assets/61.fbfbfdb1.png",ke="/MaiuBlog/services/kigoujigoku/assets/62.40273c74.png",ve="/MaiuBlog/services/kigoujigoku/assets/63.9b29fab2.png",me="/MaiuBlog/services/kigoujigoku/assets/64.d7ea1d5d.png",fe="/MaiuBlog/services/kigoujigoku/assets/91.f75b4c20.png",ye="/MaiuBlog/services/kigoujigoku/assets/92.4c06fb12.png",be="/MaiuBlog/services/kigoujigoku/assets/93.0357ea2a.png",Me="/MaiuBlog/services/kigoujigoku/assets/94.48c6d76c.png",Be="/MaiuBlog/services/kigoujigoku/assets/95.80ac9462.png",je="/MaiuBlog/services/kigoujigoku/assets/96.1967ba9a.png",Se="/MaiuBlog/services/kigoujigoku/assets/123.265c0093.png",xe="/MaiuBlog/services/kigoujigoku/assets/124.79f5e5c6.png",Ee="/MaiuBlog/services/kigoujigoku/assets/125.ba0c81ec.png",Ae="/MaiuBlog/services/kigoujigoku/assets/126.e0eb6a9b.png";class _e{constructor(){t(this,"imgs");this.imgs={sky:h,wall:T,red:P,line:d,"33":L,"34":V,"35":D,"36":G,"37":W,"38":Y,"39":$,"40":z,"41":U,"42":q,"43":J,"44":Q,"45":X,"46":Z,"47":ee,"48":se,"49":ie,"50":te,"51":ae,"52":re,"53":oe,"54":ce,"55":ge,"56":ne,"57":ue,"58":le,"59":he,"60":de,"61":pe,"62":ke,"63":ve,"64":me,"91":fe,"92":ye,"93":be,"94":Me,"95":Be,"96":je,"123":Se,"124":xe,"125":Ee,"126":Ae,bullet:O,gameover:F,btn_title:N,btn_retry:H,tag:p}}loadMain(e){Object.keys(this.imgs).forEach(s=>{e.load.image(s,this.imgs[s])}),e.load.spritesheet("senkan",I,{frameWidth:180,frameHeight:140})}loadTitle(e){e.load.image("sky",h),e.load.image("line",d),e.load.image("title",R),e.load.image("tag",p),e.load.image("btn_easy",C),e.load.image("btn_hard",K)}}const u=f.exports.jsx;function we(){return y.exports.useEffect(()=>{const r={type:c.AUTO,parent:"phaser-game",width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:[w,_]};new c.Game(r).scene.start("titlescene",{imgs:new _e})},[0]),u("div",{id:"phaser-game"})}b.render(u(M.StrictMode,{children:u(we,{})}),document.getElementById("kigou_root"));
